<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:8,&quot;tests&quot;:21,&quot;passes&quot;:21,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2025-01-22T14:28:13.480Z&quot;,&quot;end&quot;:&quot;2025-01-22T14:28:13.500Z&quot;,&quot;duration&quot;:20,&quot;testsRegistered&quot;:21,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;0f559196-71d0-41bb-a135-a79a92ce33cf&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8e9ee21a-b520-407f-871a-d589ad4e5b8b&quot;,&quot;title&quot;:&quot;Negotiation Service Test Cases&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Negotiation Service Test Cases\&quot;&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases \&quot;before each\&quot; hook in \&quot;Negotiation Service Test Cases\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;negotiationService = NegotiationService_1.NegotiationService.retrieveService(true);\nprofile = new Profile_1.Profile({\n    uri: &#x27;test-uri&#x27;,\n    configurations: {\n        allowPolicies: true,\n        allowRecommendations: true,\n    },\n    preference: [\n        {\n            policies: [\n                { policy: &#x27;allowed-policy&#x27;, frequency: 1 },\n                { policy: &#x27;another-policy&#x27;, frequency: 1 },\n            ],\n            services: [&#x27;allowed-service&#x27;],\n            ecosystems: [&#x27;test-ecosystem&#x27;],\n        },\n    ],\n    recommendations: [],\n    matching: [],\n});\ncontract = new Contract_1.Contract({\n    ecosystem: &#x27;test-ecosystem&#x27;,\n    status: &#x27;active&#x27;,\n    serviceOfferings: [\n        {\n            participant: &#x27;test-participant&#x27;,\n            serviceOffering: &#x27;allowed-service&#x27;,\n            policies: [\n                {\n                    description: &#x27;allowed-policy&#x27;,\n                    permission: [],\n                    prohibition: [],\n                },\n            ],\n        },\n    ],\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    members: [],\n    orchestrator: &#x27;&#x27;,\n    purpose: [],\n    revokedMembers: [],\n    rolesAndObligations: [],\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6d2f467-2dab-4a91-ab63-33aa810b7aec&quot;,&quot;parentUUID&quot;:&quot;8e9ee21a-b520-407f-871a-d589ad4e5b8b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ff4b63b3-a77f-46c1-aa43-65b2d7af59bf&quot;,&quot;title&quot;:&quot;isPolicyAcceptable&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should accept allowed policy&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases isPolicyAcceptable should accept allowed policy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const policy = {\n    description: &#x27;allowed-policy&#x27;,\n    permission: [],\n    prohibition: [],\n};\n(0, chai_1.expect)(negotiationService.isPolicyAcceptable(profile, policy)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;654ee8f4-4f0e-4df4-98d9-0dccdb40a384&quot;,&quot;parentUUID&quot;:&quot;ff4b63b3-a77f-46c1-aa43-65b2d7af59bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject disallowed policy&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases isPolicyAcceptable should reject disallowed policy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const policy = {\n    description: &#x27;disallowed-policy&#x27;,\n    permission: [],\n    prohibition: [],\n};\n(0, chai_1.expect)(negotiationService.isPolicyAcceptable(profile, policy)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5df10a5-4436-4cb7-8ecb-bd83b8542d04&quot;,&quot;parentUUID&quot;:&quot;ff4b63b3-a77f-46c1-aa43-65b2d7af59bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject all policies when allowPolicies is false&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases isPolicyAcceptable should reject all policies when allowPolicies is false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;profile.configurations.allowPolicies = false;\nconst policy = {\n    description: &#x27;allowed-policy&#x27;,\n    permission: [],\n    prohibition: [],\n};\n(0, chai_1.expect)(negotiationService.isPolicyAcceptable(profile, policy)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4391234-73ba-4c52-a0b4-f7d68818221b&quot;,&quot;parentUUID&quot;:&quot;ff4b63b3-a77f-46c1-aa43-65b2d7af59bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check policy frequency&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases isPolicyAcceptable should check policy frequency&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;profile.preference[0].policies[0].frequency = 0;\nconst policy = {\n    description: &#x27;allowed-policy&#x27;,\n    permission: [],\n    prohibition: [],\n};\n(0, chai_1.expect)(negotiationService.isPolicyAcceptable(profile, policy)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fbc61a2-19fd-44d9-be55-e336ea18da8e&quot;,&quot;parentUUID&quot;:&quot;ff4b63b3-a77f-46c1-aa43-65b2d7af59bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;654ee8f4-4f0e-4df4-98d9-0dccdb40a384&quot;,&quot;b5df10a5-4436-4cb7-8ecb-bd83b8542d04&quot;,&quot;e4391234-73ba-4c52-a0b4-f7d68818221b&quot;,&quot;7fbc61a2-19fd-44d9-be55-e336ea18da8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;3a3e671a-2c65-4bb4-8a4a-ec894209358d&quot;,&quot;title&quot;:&quot;isServiceAcceptable&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should accept allowed service&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases isServiceAcceptable should accept allowed service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const service = {\n    participant: &#x27;test&#x27;,\n    serviceOffering: &#x27;allowed-service&#x27;,\n    policies: [],\n};\n(0, chai_1.expect)(negotiationService.isServiceAcceptable(profile, service)).to.be\n    .true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b487eb73-d934-472e-819f-d914920edf05&quot;,&quot;parentUUID&quot;:&quot;3a3e671a-2c65-4bb4-8a4a-ec894209358d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject disallowed service&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases isServiceAcceptable should reject disallowed service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const service = {\n    participant: &#x27;test&#x27;,\n    serviceOffering: &#x27;disallowed-service&#x27;,\n    policies: [],\n};\n(0, chai_1.expect)(negotiationService.isServiceAcceptable(profile, service)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;242ead31-935b-4976-8b2a-1776337c5795&quot;,&quot;parentUUID&quot;:&quot;3a3e671a-2c65-4bb4-8a4a-ec894209358d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b487eb73-d934-472e-819f-d914920edf05&quot;,&quot;242ead31-935b-4976-8b2a-1776337c5795&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;a71875bc-bd97-41a3-a1b2-d034e9c9fc6a&quot;,&quot;title&quot;:&quot;canAcceptContract&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should accept valid contract&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases canAcceptContract should accept valid contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, chai_1.expect)(negotiationService.canAcceptContract(profile, contract)).to.be\n    .true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de20672a-e03e-406b-8675-a6d944ff2ccc&quot;,&quot;parentUUID&quot;:&quot;a71875bc-bd97-41a3-a1b2-d034e9c9fc6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject inactive contract&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases canAcceptContract should reject inactive contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contract.status = &#x27;inactive&#x27;;\n(0, chai_1.expect)(negotiationService.canAcceptContract(profile, contract)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96fcdb65-ad18-4ff1-974b-501af380557c&quot;,&quot;parentUUID&quot;:&quot;a71875bc-bd97-41a3-a1b2-d034e9c9fc6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject contract with unacceptable service offering&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases canAcceptContract should reject contract with unacceptable service offering&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contract.serviceOfferings[0].serviceOffering = &#x27;disallowed-service&#x27;;\n(0, chai_1.expect)(negotiationService.canAcceptContract(profile, contract)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c3d7d01-d68e-4828-ad67-7dc4fd7df432&quot;,&quot;parentUUID&quot;:&quot;a71875bc-bd97-41a3-a1b2-d034e9c9fc6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject contract with unacceptable policies&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases canAcceptContract should reject contract with unacceptable policies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contract.serviceOfferings[0].policies.push({\n    description: &#x27;disallowed-policy&#x27;,\n    permission: [],\n    prohibition: [],\n});\n(0, chai_1.expect)(negotiationService.canAcceptContract(profile, contract)).to.be\n    .false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d4b48f4-bc0b-4f8e-8260-e0dfaf6c3117&quot;,&quot;parentUUID&quot;:&quot;a71875bc-bd97-41a3-a1b2-d034e9c9fc6a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de20672a-e03e-406b-8675-a6d944ff2ccc&quot;,&quot;96fcdb65-ad18-4ff1-974b-501af380557c&quot;,&quot;7c3d7d01-d68e-4828-ad67-7dc4fd7df432&quot;,&quot;7d4b48f4-bc0b-4f8e-8260-e0dfaf6c3117&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;6808dd09-f698-4bf2-a6c6-ee6527432a05&quot;,&quot;title&quot;:&quot;negotiateContract&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return successful negotiation for valid contract&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases negotiateContract should return successful negotiation for valid contract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const result = negotiationService.negotiateContract(profile, contract);\n(0, chai_1.expect)(result.canAccept).to.be.true;\n(0, chai_1.expect)(result.reason).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ba19e67-84c1-433e-8edd-41905450abc9&quot;,&quot;parentUUID&quot;:&quot;6808dd09-f698-4bf2-a6c6-ee6527432a05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return failed negotiation with unacceptable policies&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases negotiateContract should return failed negotiation with unacceptable policies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contract.serviceOfferings[0].policies.push({\n    description: &#x27;disallowed-policy&#x27;,\n    permission: [],\n    prohibition: [],\n});\nconst result = negotiationService.negotiateContract(profile, contract);\n(0, chai_1.expect)(result.canAccept).to.be.false;\n(0, chai_1.expect)(result.unacceptablePolicies).to.include(&#x27;disallowed-policy&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9abcdb0f-7cba-4f2f-807f-5e75a278fbd4&quot;,&quot;parentUUID&quot;:&quot;6808dd09-f698-4bf2-a6c6-ee6527432a05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return failed negotiation with unacceptable services&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases negotiateContract should return failed negotiation with unacceptable services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contract.serviceOfferings[0].serviceOffering = &#x27;disallowed-service&#x27;;\nconst result = negotiationService.negotiateContract(profile, contract);\n(0, chai_1.expect)(result.canAccept).to.be.false;\n(0, chai_1.expect)(result.unacceptableServices).to.include(&#x27;disallowed-service&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00954b7b-b164-4c4f-b244-95e4c2f373d0&quot;,&quot;parentUUID&quot;:&quot;6808dd09-f698-4bf2-a6c6-ee6527432a05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle errors during negotiation&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases negotiateContract should handle errors during negotiation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const corruptedContract = null;\nconst result = negotiationService.negotiateContract(profile, corruptedContract);\n(0, chai_1.expect)(result.canAccept).to.be.false;\n(0, chai_1.expect)(result.reason).to.equal(&#x27;An error occurred during negotiation.&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;822f5e0a-c82a-4c09-bd1a-6be3bf28cee9&quot;,&quot;parentUUID&quot;:&quot;6808dd09-f698-4bf2-a6c6-ee6527432a05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should identify multiple unacceptable policies and services&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases negotiateContract should identify multiple unacceptable policies and services&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;contract.serviceOfferings = [\n    {\n        participant: &#x27;test&#x27;,\n        serviceOffering: &#x27;disallowed-service-1&#x27;,\n        policies: [\n            {\n                description: &#x27;disallowed-policy-1&#x27;,\n                permission: [],\n                prohibition: [],\n            },\n        ],\n    },\n    {\n        participant: &#x27;test&#x27;,\n        serviceOffering: &#x27;disallowed-service-2&#x27;,\n        policies: [\n            {\n                description: &#x27;disallowed-policy-2&#x27;,\n                permission: [],\n                prohibition: [],\n            },\n        ],\n    },\n];\nconst result = negotiationService.negotiateContract(profile, contract);\n(0, chai_1.expect)(result.canAccept).to.be.false;\n(0, chai_1.expect)(result.unacceptablePolicies).to.have.members([\n    &#x27;disallowed-policy-1&#x27;,\n    &#x27;disallowed-policy-2&#x27;,\n]);\n(0, chai_1.expect)(result.unacceptableServices).to.have.members([\n    &#x27;disallowed-service-1&#x27;,\n    &#x27;disallowed-service-2&#x27;,\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73012375-0d7b-451e-a499-ba21db7216d0&quot;,&quot;parentUUID&quot;:&quot;6808dd09-f698-4bf2-a6c6-ee6527432a05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5ba19e67-84c1-433e-8edd-41905450abc9&quot;,&quot;9abcdb0f-7cba-4f2f-807f-5e75a278fbd4&quot;,&quot;00954b7b-b164-4c4f-b244-95e4c2f373d0&quot;,&quot;822f5e0a-c82a-4c09-bd1a-6be3bf28cee9&quot;,&quot;73012375-0d7b-451e-a499-ba21db7216d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;480ac7b2-a91d-426d-a642-4f1f3b004c89&quot;,&quot;title&quot;:&quot;areServicePoliciesAcceptable&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should accept service with acceptable policies&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases areServicePoliciesAcceptable should accept service with acceptable policies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const service = {\n    participant: &#x27;test&#x27;,\n    serviceOffering: &#x27;allowed-service&#x27;,\n    policies: [\n        {\n            description: &#x27;allowed-policy&#x27;,\n            permission: [],\n            prohibition: [],\n        },\n    ],\n};\n(0, chai_1.expect)(negotiationService.areServicePoliciesAcceptable(profile, service))\n    .to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;609d749b-0040-4322-a937-ba6088142e20&quot;,&quot;parentUUID&quot;:&quot;480ac7b2-a91d-426d-a642-4f1f3b004c89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject service with unacceptable policies&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases areServicePoliciesAcceptable should reject service with unacceptable policies&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const service = {\n    participant: &#x27;test&#x27;,\n    serviceOffering: &#x27;allowed-service&#x27;,\n    policies: [\n        {\n            description: &#x27;disallowed-policy&#x27;,\n            permission: [],\n            prohibition: [],\n        },\n    ],\n};\n(0, chai_1.expect)(negotiationService.areServicePoliciesAcceptable(profile, service))\n    .to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d360f54-c2e5-415e-81df-87b8619f27c5&quot;,&quot;parentUUID&quot;:&quot;480ac7b2-a91d-426d-a642-4f1f3b004c89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;609d749b-0040-4322-a937-ba6088142e20&quot;,&quot;0d360f54-c2e5-415e-81df-87b8619f27c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;9dcda039-ef40-4638-8abf-7316269ea2ca&quot;,&quot;title&quot;:&quot;updateProfilePreferences&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add valid preferences&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases updateProfilePreferences should add valid preferences&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newPreferences = [\n    {\n        policies: [{ policy: &#x27;new-policy&#x27;, frequency: 1 }],\n        services: [&#x27;new-service&#x27;],\n        ecosystems: [&#x27;new-ecosystem&#x27;],\n    },\n];\nconst initialLength = profile.preference.length;\nnegotiationService.updateProfilePreferences(profile, newPreferences);\n(0, chai_1.expect)(profile.preference.length).to.equal(initialLength + 1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe449f72-880b-46fe-8230-0274bee69c4e&quot;,&quot;parentUUID&quot;:&quot;9dcda039-ef40-4638-8abf-7316269ea2ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should filter out invalid preferences&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases updateProfilePreferences should filter out invalid preferences&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidPreferences = [\n    undefined,\n    null,\n    { policies: null, services: [], ecosystems: [] },\n];\nconst initialLength = profile.preference.length;\nnegotiationService.updateProfilePreferences(profile, invalidPreferences);\n(0, chai_1.expect)(profile.preference.length).to.equal(initialLength);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39d361dd-c275-4d8b-93b3-8e21a0446f5a&quot;,&quot;parentUUID&quot;:&quot;9dcda039-ef40-4638-8abf-7316269ea2ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe449f72-880b-46fe-8230-0274bee69c4e&quot;,&quot;39d361dd-c275-4d8b-93b3-8e21a0446f5a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;cb285819-d518-47ac-9c57-8346178a0e89&quot;,&quot;title&quot;:&quot;NegotiationService Singleton&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\contract.agent.1.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the same instance without refresh&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases NegotiationService Singleton should return the same instance without refresh&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const instance1 = NegotiationService_1.NegotiationService.retrieveService();\nconst instance2 = NegotiationService_1.NegotiationService.retrieveService();\n(0, chai_1.expect)(instance1).to.equal(instance2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be69f281-9ba8-49da-a86e-d273656cafd5&quot;,&quot;parentUUID&quot;:&quot;cb285819-d518-47ac-9c57-8346178a0e89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a new instance with refresh&quot;,&quot;fullTitle&quot;:&quot;Negotiation Service Test Cases NegotiationService Singleton should return a new instance with refresh&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const instance1 = NegotiationService_1.NegotiationService.retrieveService();\nconst instance2 = NegotiationService_1.NegotiationService.retrieveService(true);\n(0, chai_1.expect)(instance1).to.not.equal(instance2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbc0ea31-584a-4f2e-9482-4a92c447b4d4&quot;,&quot;parentUUID&quot;:&quot;cb285819-d518-47ac-9c57-8346178a0e89&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be69f281-9ba8-49da-a86e-d273656cafd5&quot;,&quot;bbc0ea31-584a-4f2e-9482-4a92c447b4d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:4000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;contract.agent.1.spec.ts&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;mochawesome-report/contract&quot;,&quot;reportFilename&quot;:&quot;contract.agent.1.spec.ts&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;contract.agent.1.spec.ts&quot;,&quot;reportDir&quot;:&quot;mochawesome-report/contract&quot;,&quot;reportTitle&quot;:&quot;contract-agent&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\contract\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\mochawesome-report\\contract\\contract.agent.1.spec.ts.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\E\\Desktop\\visions\\dev\\cca-ptx\\contract-agent\\mochawesome-report\\contract\\contract.agent.1.spec.ts.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>